<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OOP JS</title>
    <!-- Css -->
    <link href="https://bootswatch.com/cosmo/bootstrap.css" rel="stylesheet">
    <link media="all" type="text/css" rel="stylesheet" href="http://newsletter.softhem.se/css/site.css">
    <link rel="stylesheet" href="../styles.css">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Raleway:100,600" rel="stylesheet" type="text/css">
    <!-- Js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script>
        // print output of console.log to page
        $(document).ready(function(){
            function consoleBind(ele) {
                var old = console.log;
                var logger = ele;
                console.log = function (message) {
                    if (typeof message == 'object') {
                        logger.innerHTML += (JSON && JSON.stringify ? JSON.stringify(message) : message) + '<br />';
                    } else {
                        logger.innerHTML += message + '<br />';
                    }
                }
            };

            var showCodes = ['detecting'];
            (function() {
                showCodes.forEach(function(id) {
                    $('div#'+id).append('<pre>'+ $('script#'+id).text() +'</pre>');
                    $('div#'+id).append('<h4>Output</h4>');
                    var ele = document.createElement('pre');
                    consoleBind(ele);
                    $('div#'+id).append(ele);
                })
            })();

        })

    </script>

</head>
<body>
<div class="wrapper">

    <section id="main">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <hr />
                    <h1>The principles of OO JS - By Nicholas: Chapter 05</h1>
                    <hr />
                    <a href="../index.php" class="btn btn-success">Index</a>
                    <h2>Promise</h2>
                    <p>A promise is an object that does asynchronous operation and return the value to a callback function on success.</p>
                    <p>The then part supplies the callback functions to the promise. Promises can be chained with then (thenable).</p>
                    <p>

                    <div id="detecting">
                    </div>

                </div>
            </div>
        </div>
    </section>

</div>

<footer class="footer">
    <div class="container">
        <p class="pull-left">&copy; SoftHem 2017</p>
        <p class="pull-right">Powered by <a href="http://www.softhem.se/" rel="external">SoftHem</a></p>
    </div>
</footer>

<script id="detecting">
    $(document).ready(function() {

        const promise = new Promise((resolve, reject)=>{
            resolve('Fulfilled');
            reject('Error');
        });

        promise.then((data)=>{
            console.log(data);
        }, (error)=>{
            console.log('Some error occurred ' + error);
        });


        console.log('Chaining promises');

        new Promise((resolve, reject) => {
            setTimeout(()=>resolve(1), 1000);
        }).then(result=>{
            console.log(result);
            return result * 2;
        }).then(result => {
            console.log(result);
            return result * 2;
        }).then(result=> {
            console.log(result);
            return result * 2;
        }).then(result=>console.log(result));


    });
</script>

</body>
</html>
